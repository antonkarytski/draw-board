(this.webpackJsonpdrawboard=this.webpackJsonpdrawboard||[]).push([[0],{16:function(t,e,r){},17:function(t,e,r){"use strict";r.r(e);var n=r(1),a=r.n(n),c=r(8),i=r.n(c),s=r(5);function o(t,e){t({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY,timeStamp:e.timeStamp})}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.saveHistoryTo,r=Object(n.useRef)(null),a=Object(n.useRef)(null);function c(){a.current=null}function i(t){var n,c=t.x,i=t.y,s=t.timeStamp,o=null===(n=r.current)||void 0===n?void 0:n.getContext("2d");o&&(o.beginPath(),o.arc(c,i,1,0,2*Math.PI),o.fill(),a.current={x:c,y:i},e&&e.current.push({x:c,y:i,timeStamp:s,firstClick:!0}))}function s(t){var n,c,i,s,o,u=t.x,l=t.y,v=t.timeStamp,d=null===(n=r.current)||void 0===n?void 0:n.getContext("2d");d&&(d.beginPath(),d.moveTo(null!==(c=null===(i=a.current)||void 0===i?void 0:i.x)&&void 0!==c?c:u,null!==(s=null===(o=a.current)||void 0===o?void 0:o.y)&&void 0!==s?s:l),d.lineTo(u,l),d.stroke(),a.current={x:u,y:l},e&&e.current.push({x:u,y:l,timeStamp:v}))}function o(){var t,e=null===(t=r.current)||void 0===t?void 0:t.getContext("2d");e&&(a.current=null,e.clearRect(0,0,e.canvas.width,e.canvas.height))}return{drawDot:i,drawLine:s,clear:o,resetPosition:c,canvasRef:r}}var l=r(4),v=r.n(l),d=r(2),f=r.n(d),j=r(0);function b(t){var e=t.saveHistoryTo,r=t.className,n=u({saveHistoryTo:e}),a=n.canvasRef,c=n.drawLine,i=n.drawDot,s=n.resetPosition;return Object(j.jsx)("canvas",{className:f()(v.a.Canvas,r),width:500,height:500,ref:a,onMouseDown:function(t){return o(i,t)},onMouseMove:function(t){t.buttons&&o(c,t)},onMouseUp:s})}var p=r(3),h=r(10),m=r(9),x=r.n(m);function y(t){var e=t.label,r=t.onClick,n=t.className;return Object(j.jsx)("button",{className:f()(x.a.Button,n),onClick:r,children:e})}function O(t){var e=t.isClicked,r=Object(p.a)(t,["isClicked"]);return Object(j.jsx)(y,Object(h.a)({label:e?"Pause":"Play"},r))}function g(t){var e=t.history,r=t.controller,a=Object(n.useRef)(-1),c=Object(n.useRef)(!1),i=Object(n.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1],v=r.drawDot,d=r.drawLine,f=r.resetPosition,j=r.clear;function b(t){var e=t.firstClick,r=Object(p.a)(t,["firstClick"]);if(e)return f(),void v(r);d(r)}function h(){var t;if(c.current&&(null===(t=e.current)||void 0===t?void 0:t.length)){a.current>=e.current.length-1&&(j(),a.current=-1);var r=a.current+1;a.current=r;var n=e.current[r];if(b(n),r===e.current.length-1&&m(),c.current)var i=e.current[a.current+1].timeStamp-n.timeStamp,s=setTimeout((function(){h(),clearTimeout(s)}),i>500?500:i)}}function m(){c.current=!1,l(!1)}return{togglePlaying:function(){e.current.length&&(c.current=!c.current,l(c.current),c.current&&h())},stepBack:function(){if(-1!==a.current){m(),j();var t=function(t,e){for(var r=t.length;r--;)if(e(t[r],r,t))return r;return-1}(e.current,(function(t,e){return!!t.firstClick&&e<a.current})),r=-1===t?-1:t-1;a.current=r,-1!==r&&e.current.slice(0,r+1).forEach(b)}},stepForward:function(){if(!(a.current>=e.current.length-1)){m();var t=e.current.findIndex((function(t,e){return!!t.firstClick&&e>a.current+1})),r=-1!==t?t-1:e.current.length-1;e.current.slice(a.current+1,r+1).forEach(b),a.current=r}},isPlaying:u}}function w(t){var e=t.history,r=t.className,n=u(),a=n.canvasRef,c=g({controller:Object(p.a)(n,["canvasRef"]),history:e}),i=c.stepBack,s=c.stepForward,o=c.togglePlaying,l=c.isPlaying;return Object(j.jsxs)("div",{className:r,children:[Object(j.jsx)("canvas",{width:500,height:500,ref:a,className:f()(v.a.Canvas)}),Object(j.jsxs)("div",{className:v.a.ButtonsSet,children:[Object(j.jsx)(y,{label:"Step back",onClick:i}),Object(j.jsx)(O,{className:v.a.PlayButton,isClicked:l,onClick:o}),Object(j.jsx)(y,{label:"Step forward",onClick:s})]})]})}var C=r(6),k=r.n(C);var _=function(){var t=Object(n.useRef)([]),e=Object(n.useState)({draw:1,repeater:2}),r=Object(s.a)(e,2),a=r[0],c=r[1];return Object(j.jsxs)("div",{className:k.a.App,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)(b,{saveHistoryTo:t,className:k.a.DrawBoard},a.draw),Object(j.jsx)("div",{children:Object(j.jsx)(y,{label:"Reset",onClick:function(){t.current=[],c((function(t){return{draw:t.draw+1,repeater:t.repeater+1}}))}})})]}),Object(j.jsx)(w,{history:t,className:k.a.RepeaterBoard},a.repeater)]})};r(16);i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(_,{})}),document.getElementById("root"))},4:function(t,e,r){t.exports={Canvas:"styles_Canvas__3C7m-",ButtonsSet:"styles_ButtonsSet__3Xp20",PlayButton:"styles_PlayButton__1v80O"}},6:function(t,e,r){t.exports={App:"styles_App__2NK-3",DrawBoard:"styles_DrawBoard__p1zvK",RepeaterBoard:"styles_RepeaterBoard__ukQ3I"}},9:function(t,e,r){t.exports={Button:"styles_Button__37uBx"}}},[[17,1,2]]]);
//# sourceMappingURL=main.3d46cff9.chunk.js.map